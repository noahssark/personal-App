<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Build a Pomodoro Clock</title>
  
</head>
<link href="https://fonts.googleapis.com/css?family=Orbitron" rel="stylesheet">
  <script src="script.js"></script>

<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js
">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<style>
    body {
  background-color: black;
  text-align: center;
}

button {
  font-size: 16px;
  color: white;
  outline: none;
  border-radius: 10px;
}

button:active {
  transform: translateY(1px);
  box-shadow: none;
}

#timer, #break {
  margin: auto;
  color: white;
  font-family: 'Orbitron', sans-serif;
  font-size: 62px;
}

#break {
  font-size: 48px;
}

#start {
  background-color: black;
  border: 2px solid green;
  margin-bottom: 5px;
}

#stop {
  background-color: black;
  border: 2px solid red;
}

#reset, #increment, #decrement, #incrementbreak, #decrementbreak {
  background-color: black;
  border: 2px solid #222;
}

#start:hover {
  background-color: green;
}

#stop:hover {
  background-color: red;
}

#reset:hover, #increment:hover, #decrement:hover, #incrementbreak:hover, #decrementbreak:hover {
  background-color: #222;
}
</style>
<body>
  <p id="timer"></p>
  <button id="start" onclick="startTimer()">Start</button>
  <button id="stop" onclick="stopTimer()">Stop</button>
  <button id="reset" onclick="resetTimer()">Reset</button>
  <button id="increment" onclick="incrementTimer()">&plus;</button>
  <button id="decrement" onclick="decrementTimer()">&minus;</button>
  <p id="break"></p>
  <button id="incrementbreak" onclick="incrementBreakTimer()">&plus;</button>
  <button id="decrementbreak" onclick="decrementBreakTimer()">&minus;</button>

  <script>
      $(document).ready(function(){
        var timer = 1500;
var breaktimer = 300;
var minutes;
var seconds;
var timerCountDown;
var breakminutes;
var breakseconds;
var breakCountDown;

// Initialize the timers
getMinutesSeconds(timer);
getBreakMinutesSeconds(breaktimer);

// Starts the timer on start button push, if it's 0, start the break timer, else disable the start button and start counting down until it hits 0. Temporarily set to count down quickly for debugging.
function startTimer() {
  if ((minutes <= 0 && seconds <= 0) || timer <= 0) {
    startBreakTimer();
  } else {
    disableStart();
    timerCountDown = setInterval(function() {
      seconds--;
      if (minutes === 0 && seconds === 0) {
        playSound();
        stopTimer();
        startBreakTimer();
      }
      if (seconds < 10 && seconds >= 0) {
        seconds = "0" + seconds;
      } else if (seconds < 0) {
        minutes--;
        seconds = 59;
      }
      document.getElementById("timer").innerHTML = minutes + ":" + seconds;
    }, 60);
  }
}

// Disable the start button
function disableStart() {
  return (document.getElementById("start").disabled = true);
}

// Enable the start button
function enableStart() {
  return (document.getElementById("start").disabled = false);
}

// Stops the timers, keeping the current time and wait for start or reset to be pushed
function stopTimer() {
  clearInterval(timerCountDown);
  clearInterval(breakCountDown);
  enableStart();
}

// Stops and resets the timer and break timer to their initial values
function resetTimer() {
  stopTimer();
  getMinutesSeconds(timer);
  getBreakMinutesSeconds(breaktimer);
}

// Increments the timer by 1 minute if it's less than the max of 50 minutes
function incrementTimer() {
  if (timer < 3000) {
      stopTimer();
      timer += 60;
      return getMinutesSeconds(timer);
  }
}

// Decrements the timer by 1 minute if it's greater than 0
function decrementTimer() {
  if (timer > 0) {
    stopTimer();
    timer -= 60;
    return getMinutesSeconds(timer);
  }
}

// Takes a time parameter, and returns it in minutes and seconds then returns it to the timer
function getMinutesSeconds(time) {
  minutes = Math.floor(time / 60);
  seconds = time % 60;
  if (seconds < 10) {
    seconds = "0" + seconds;
  }
  return (document.getElementById("timer").innerHTML = minutes + ":" + seconds);
}

/*-------------------BREAK TIMER-------------------*/

// Takes a time parameter, and returns it in minutes and seconds then returns it to the break timer. Temporarily set to count down quickly for debugging.
function startBreakTimer() {
  if (breaktimer === 0) {
    return;
  } else {
    disableStart();
    breakCountDown = setInterval(function() {
      breakseconds--;
      if (breakminutes === 0 && breakseconds === 0) {
        playSound();
        resetTimer();
      }
      if (breakseconds < 10 && breakseconds >= 0) {
        breakseconds = "0" + breakseconds;
      } else if (breakseconds < 0) {
        breakminutes--;
        breakseconds = 59;
      }
      document.getElementById("break").innerHTML = breakminutes + ":" + breakseconds;
    }, 60);
  }
}

// Takes a break time parameter, and returns it in minutes and seconds then returns it to the break timer
function getBreakMinutesSeconds(time) {
  breakminutes = Math.floor(time / 60);
  breakseconds = time % 60;
  if (breakseconds < 10) {
    breakseconds = "0" + breakseconds;
  }
  // alert (breakminutes + ":" + breakseconds); ALERTS THE CORRECT NUMBER
  return (document.getElementById("break").innerHTML = breakminutes + ":" + breakseconds);
}

// Increments the break timer by 5 minutes if it's less than the max of 10 minutes
function incrementBreakTimer() {
  if (breaktimer < 600) {
    stopTimer();
    breaktimer += 300;
    return getBreakMinutesSeconds(breaktimer);
  }
}

// Decrements the breaktimer by 5 minute if it's greater than 0
function decrementBreakTimer() {
  if (breaktimer > 0) {
    stopTimer();
    breaktimer -= 300;
    return getBreakMinutesSeconds(breaktimer);
  }
}

function playSound() {
  var alarm = new Audio(
    "http://soundbible.com/mp3/Bell Sound Ring-SoundBible.com-181681426.mp3"
    );
  alarm.play();
}
      })
  </script>
</body>

</html>
